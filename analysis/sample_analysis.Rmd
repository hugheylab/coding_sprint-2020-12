---
title: "Sample Analysis"
author: "jschoenbachler"
date: "2020-12-22"
output: workflowr::wflow_html
editor_options:
  chunk_output_type: console
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE)
```

## Introduction

ALL data files are located within the `data` folder. This should describe how to access the data and what you can do with it.

## Load data

Load data example here.

```{r load libraries}
library(data.table)
library(ggplot2)
```


```{r load all data}
songDT = fread('data/song_data')
head(songDT, 5)
```

## Use word count function

Pass in the data.table to the function and it will return back a data table with each song name, id, word, and count. You can also pass a list of words to exclude `wordExclude` that will exclude those words from the list.

```{r use word count}
source('code/get_lyric_word_count.R')
lyricDT = getLyricWordCount(songDT)
head(lyricDT, 15)
head(getLyricWordCount(songDT, c('merry', 'holidays')), 15)
```

## Sample analyses of danceable words

We can merge the tables and then figure out which words are the most "danceable" based on a column that comes from spotify.

```{r analyze dance words}
songDT = merge(songDT, lyricDT, by = c('id.x', 'name'))
songDT = songDT[, word_danceability := ((count / word_total) * danceability)]
head(setorder(songDT, -word_danceability), 20)
```
